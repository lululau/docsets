<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta content='A Ruby ODM for MongoDB' name='description' />
    <meta content='mongoid, mongodb, ruby, rails, odm, durran jordan' name='keywords' />
    <link href="../../stylesheets/coderay.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="../../stylesheets/site.css" media="screen" rel="stylesheet" type="text/css" />
    
  </head>
  <body>
    <div id='container'>
      <div class='navigation'>
        <a href="../../index.html"><img src="../../images/mongoid-logo-small.png" />
        </a>
        
        <ul class='navigation'>
          <li class='area'><a class="area" href="../../index.html">home</a></li>
          <li class='area'><a class="area" href="../../docs.html">docs</a></li>
          <li><a class="section" href="../installation.html">installation</a></li>
          <li><a class="section" href="../documents.html">documents</a></li>
          <li><a class="section" href="../persistence.html">persistence</a></li>
          <li><a class="section" href="../querying.html">querying</a></li>
          <li><a class="section" href="../relations.html">relations</a></li>
          <li><a class="section" href="../identity_map.html">identity map</a></li>
          <li><a class="section" href="../callbacks.html">callbacks</a></li>
          <li><a class="section" href="../validation.html">validation</a></li>
          <li><a class="section" href="../indexing.html">indexing</a></li>
          <li><a class="section" href="../extras.html">extras</a></li>
          <li><a class="section" href="../rails.html">rails</a></li>
          <li><a class="subsection" href="multi_parameter_attributes.html">multi-param attributes</a></li>
          <li><a class="subsection" href="rake.html">rake tasks</a></li>
          <li><a class="subsection active" href="railties.html">railties</a></li>
          <li><a class="section" href="../extensions.html">extensions</a></li>
          <li><a class="section" href="../upgrading.html">upgrading</a></li>
          <li><a class="section" href="../contributing.html">contributing</a></li>
          <li class='area'><a class="area" href="../../performance.html">performance</a></li>
          <li class='area'><a class="area" href="../../credits.html">credits</a></li>
          <li class='area'><a class="area" href="../../links.html">links</a></li>
        </ul>
      </div>
      <div class='main'>
        <div class='header'>
          <a href="http://twitter.com/mongoid/"><img src="../../images/twitter-logo.png" />
          </a>
          <a href="http://github.com/mongoid/"><img src="../../images/github-logo.png" />
          </a>
        </div>
        <div class='content'>
          <h1>railties</h1>
          <p>
            Mongoid provides some railties and initializers that one should be
            aware of when writing a Rails application with Mongoid.
          </p>
          <h3>configuration</h3>
          <p>
            You can set Mongoid configuration options in your <tt>application.rb</tt>
            along with other Rails environment specific options by accessing
            <tt>config.mongoid</tt>. Options set here will override those set in
            your <tt>config/mongoid.yml</tt>.
          </p>
          <div class="CodeRay">
            <div class="code"><pre><span class="keyword">module</span> <span class="class">MyApplication</span>&#x000A;  <span class="keyword">class</span> <span class="class">Application</span> &lt; <span class="constant">Rails</span>::<span class="constant">Application</span>&#x000A;    config.mongoid.logger = <span class="constant">Logger</span>.new(<span class="global-variable">$stdout</span>, <span class="symbol">:warn</span>)&#x000A;    config.mongoid.persist_in_safe_mode = <span class="predefined-constant">true</span>&#x000A;  <span class="keyword">end</span>&#x000A;<span class="keyword">end</span>&#x000A;</pre></div>
          </div>
          <h3>model preloading</h3>
          <p>
            In order to properly set up single collection inheritance, Mongoid
            needs to preload all models before every request in development mode.
            This can get slow, so if you are not using any inheritance it is
            recommended you turn this feature off.
          </p>
          <div class="CodeRay">
            <div class="code"><pre>config.mongoid.preload_models = <span class="predefined-constant">false</span>&#x000A;</pre></div>
          </div>
          <h3>exceptions</h3>
          <p>
            Similar to Active Record, Mongoid tells raise to return specific http
            codes when some errors are raised.
            <ul>
              <li><tt>Mongoid::Errors::DocumentNotFound</tt>: 404</li>
              <li><tt>Mongoid::Errors::Validations</tt>: 422</li>
            </ul>
          </p>
          <h3>unicorn and passenger</h3>
          <p>
            When using Unicorn or Passenger, each time a child process is forked
            when using app preloading or smart spawning, Mongoid will automatically
            reconnect to the master database. If you are doing this in your
            application manually you may remove your code.
          </p>
        </div>
        <div class='footer'>
          Mongoid, 2009-2011, written and maintained by
          <a href="http://github.com/durran">Durran Jordan</a>.
        </div>
        <div class='clear'></div>
      </div>
    </div>
  </body>
</html>
