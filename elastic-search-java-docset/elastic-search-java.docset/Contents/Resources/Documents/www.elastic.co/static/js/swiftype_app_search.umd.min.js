!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SwiftypeAppSearch={})}(this,function(e){"use strict";var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=function(){function t(e){i(this,t),this.data=e}return n(t,[{key:"getRaw",value:function(e){return(this.data[e]||{}).raw}},{key:"getSnippet",value:function(e){return(this.data[e]||{}).snippet}}]),t}(),o=function e(t,n){i(this,e),this.rawResults=t,this.rawInfo=n;var r=new Array;t.forEach(function(e){r.push(new s(e))}),this.results=r,this.info=n},u=function(){function r(e,t,n){i(this,r),this.apiKey=t,this.engineName=n,this.apiEndpoint="https://"+e+".api.swiftype.com/api/as/v1/",this.searchPath="engines/"+this.engineName+"/search",this.clickPath="engines/"+this.engineName+"/click"}return n(r,[{key:"search",value:function(e,t){var n=Object.assign({query:e},t);return this._requestJSON(this.searchPath+".json",n).then(function(e){var t=e.response,n=e.json;if(!t.ok)throw new Error("["+t.status+"]"+(n.errors?" "+n.errors:""));return new o(n.results,function(r,i){if(!r)return;return Object.keys(r).reduce(function(e,t){var n=r[t];return t!==i&&(e[t]=n),e},{})}(n,"results"))})}},{key:"click",value:function(e){var t=e.query,n=e.documentId,r=e.requestId,i=e.tags,s={query:t,document_id:n,request_id:r,tags:void 0===i?[]:i};return this._requestJSON(this.clickPath+".json",s).then(function(e){var t=e.response,n=e.json;if(!t.ok)throw new Error("["+t.status+"]"+(n.errors?" "+n.errors:""))})}},{key:"_requestJSON",value:function(e,t){return this._request(e,t).then(function(t){return t.json().then(function(e){return{response:t,json:e}}).catch(function(){return{response:t,json:{}}})})}},{key:"_request",value:function(e,t){var n=new Headers({Authorization:"Bearer "+this.apiKey,"Content-Type":"application/json","X-Swiftype-Client":"swiftype-app-search-javascript","X-Swiftype-Client-Version":"1.3.2"});return fetch(""+this.apiEndpoint+e,{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"})}}]),r}();e.createClient=function(e){var t=e.hostIdentifier,n=e.accountHostKey,r=e.apiKey,i=e.engineName;return new u(t=t||n,r,i)},Object.defineProperty(e,"__esModule",{value:!0})});
