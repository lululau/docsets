
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>Sorting - Miller Latest Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="../../../../fonts.googleapis.com/css%3Ffamily=Lato:300,300i,400,400i,700,700i|Lato+Mono:400,400i,700,700i&amp;display=fallback.css">
        <style>:root{--md-text-font:"Lato";--md-code-font:"Lato Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
      <link rel="stylesheet" href="../../../_/static/css/badge_only.css">
    
      <link rel="stylesheet" href="../../../_/static/css/readthedocs-doc-embed.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="index.html#sorting" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../latest.html" title="Miller Latest Documentation" class="md-header__button md-logo" aria-label="Miller Latest Documentation" data-md-component="logo">
      
  <img src="../images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Miller Latest Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sorting
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="../../../../github.com/johnkerl/miller.html" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    miller
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../latest.html" title="Miller Latest Documentation" class="md-nav__button md-logo" aria-label="Miller Latest Documentation" data-md-component="logo">
      
  <img src="../images/favicon.png" alt="logo">

    </a>
    Miller Latest Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="../../../../github.com/johnkerl/miller.html" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    miller
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../latest.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installing-miller/index.html" class="md-nav__link">
        Installing Miller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10min/index.html" class="md-nav__link">
        Miller in 10 minutes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keystroke-savers/index.html" class="md-nav__link">
        Keystroke-savers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../miller-programming-language/index.html" class="md-nav__link">
        Intro to Miller's programming language
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../miller-on-windows/index.html" class="md-nav__link">
        Miller on Windows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../community/index.html" class="md-nav__link">
        Community
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../structure-of-these-documents/index.html" class="md-nav__link">
        Structure of these documents
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Miller in more detail
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Miller in more detail" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Miller in more detail
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../features/index.html" class="md-nav__link">
        Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../file-formats/index.html" class="md-nav__link">
        File formats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../unix-toolkit-context/index.html" class="md-nav__link">
        Unix-toolkit context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../record-heterogeneity/index.html" class="md-nav__link">
        Record-heterogeneity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internationalization/index.html" class="md-nav__link">
        Internationalization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../output-colorization/index.html" class="md-nav__link">
        Output colorization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../customization/index.html" class="md-nav__link">
        Customization: .mlrrc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vimrc/index.html" class="md-nav__link">
        Syntax highlighting: vimrc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../repl/index.html" class="md-nav__link">
        The REPL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../online-help/index.html" class="md-nav__link">
        Online help
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/index.html" class="md-nav__link">
        How to contribute
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          FAQs and examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="FAQs and examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          FAQs and examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../csv-with-and-without-headers/index.html" class="md-nav__link">
        CSV, with and without headers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shapes-of-data/index.html" class="md-nav__link">
        Shapes of data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operating-on-all-fields/index.html" class="md-nav__link">
        Operating on all fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operating-on-all-records/index.html" class="md-nav__link">
        Operating on all records
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../questions-about-then-chaining/index.html" class="md-nav__link">
        Questions about then-chaining
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../questions-about-joins/index.html" class="md-nav__link">
        Questions about joins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../date-time-examples/index.html" class="md-nav__link">
        Date/time examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../special-symbols-and-formatting/index.html" class="md-nav__link">
        Special symbols and formatting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shell-commands/index.html" class="md-nav__link">
        Running shell commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-cleaning-examples/index.html" class="md-nav__link">
        Data-cleaning examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-diving-examples/index.html" class="md-nav__link">
        Data-diving examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../log-processing-examples/index.html" class="md-nav__link">
        Log-processing examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sql-examples/index.html" class="md-nav__link">
        SQL examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubectl-and-helm/index.html" class="md-nav__link">
        Processing Kubectl and Helm output
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dkvp-examples/index.html" class="md-nav__link">
        DKVP I/O examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../statistics-examples/index.html" class="md-nav__link">
        Statistics examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../randomizing-examples/index.html" class="md-nav__link">
        Randomizing examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../two-pass-algorithms/index.html" class="md-nav__link">
        Two-pass algorithms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../programming-examples/index.html" class="md-nav__link">
        Programming-language examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../misc-examples/index.html" class="md-nav__link">
        Miscellaneous examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Main reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Main reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Main reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-overview/index.html" class="md-nav__link">
        Miller command structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-then-chaining/index.html" class="md-nav__link">
        Then-chaining
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-flag-list/index.html" class="md-nav__link">
        List of command-line flags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-verbs/index.html" class="md-nav__link">
        List of verbs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-in-place-processing/index.html" class="md-nav__link">
        In-place mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-number-formatting/index.html" class="md-nav__link">
        Number formatting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-separators/index.html" class="md-nav__link">
        Separators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parsing-and-formatting-fields/index.html" class="md-nav__link">
        Parsing and formatting fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flatten-unflatten/index.html" class="md-nav__link">
        Flatten/unflatten: converting between JSON and tabular formats
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Sorting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        Sorting
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="index.html#sorting-records-the-sort-verb" class="md-nav__link">
    Sorting records: the sort verb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#sorting-fields-within-records-the-sort-within-records-verb" class="md-nav__link">
    Sorting fields within records: the sort-within-records verb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#the-sort-function-by-example" class="md-nav__link">
    The sort function by example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#simple-sorting-of-arrays" class="md-nav__link">
    Simple sorting of arrays
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#simple-sorting-of-maps-within-records" class="md-nav__link">
    Simple sorting of maps within records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#simple-sorting-of-maps-across-records" class="md-nav__link">
    Simple sorting of maps across records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-arrays-within-records" class="md-nav__link">
    Custom sorting of arrays within records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-arrays-across-records" class="md-nav__link">
    Custom sorting of arrays across records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-maps-within-records" class="md-nav__link">
    Custom sorting of maps within records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-maps-across-records" class="md-nav__link">
    Custom sorting of maps across records
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../streaming-and-memory/index.html" class="md-nav__link">
        Streaming processing, and memory usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-compressed-data/index.html" class="md-nav__link">
        Compressed data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cpu/index.html" class="md-nav__link">
        CPU/multicore usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scripting/index.html" class="md-nav__link">
        Scripting with Miller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-env-vars/index.html" class="md-nav__link">
        Miller environment variables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Types reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Types reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Types reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-data-types/index.html" class="md-nav__link">
        Data types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-strings/index.html" class="md-nav__link">
        Strings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-regular-expressions/index.html" class="md-nav__link">
        Regular expressions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-arithmetic/index.html" class="md-nav__link">
        Arithmetic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-maps/index.html" class="md-nav__link">
        Maps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-arrays/index.html" class="md-nav__link">
        Arrays
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-null-data/index.html" class="md-nav__link">
        Null/empty/absent data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          DSL reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DSL reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          DSL reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl/index.html" class="md-nav__link">
        DSL overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-syntax/index.html" class="md-nav__link">
        DSL syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-variables/index.html" class="md-nav__link">
        DSL variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-control-structures/index.html" class="md-nav__link">
        DSL control structures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-operators/index.html" class="md-nav__link">
        DSL operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-builtin-functions/index.html" class="md-nav__link">
        DSL built-in functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-user-defined-functions/index.html" class="md-nav__link">
        DSL user-defined functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-higher-order-functions/index.html" class="md-nav__link">
        DSL higher-order functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-filter-statements/index.html" class="md-nav__link">
        DSL filter statements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-output-statements/index.html" class="md-nav__link">
        DSL output statements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-unset-statements/index.html" class="md-nav__link">
        DSL unset statements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-time/index.html" class="md-nav__link">
        DSL datetime/timezone functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-errors/index.html" class="md-nav__link">
        DSL errors and transparency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-differences/index.html" class="md-nav__link">
        Differences from other programming languages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-dsl-complexity/index.html" class="md-nav__link">
        A note on the complexity of Miller's expression language
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Background
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Background" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Background
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../why/index.html" class="md-nav__link">
        Why?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../etymology/index.html" class="md-nav__link">
        Why call it Miller?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../originality/index.html" class="md-nav__link">
        How original is Miller?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/index.html" class="md-nav__link">
        Performance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Misc. reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Misc. reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Misc. reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference-main-auxiliary-commands/index.html" class="md-nav__link">
        Auxiliary commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manpage/index.html" class="md-nav__link">
        Manual page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../build/index.html" class="md-nav__link">
        Building from source
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-release/index.html" class="md-nav__link">
        How to create a new release
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-docs/index.html" class="md-nav__link">
        Documents for previous releases
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/index.html" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../new-in-miller-6/index.html" class="md-nav__link">
        What's new in Miller 6
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="index.html#sorting-records-the-sort-verb" class="md-nav__link">
    Sorting records: the sort verb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#sorting-fields-within-records-the-sort-within-records-verb" class="md-nav__link">
    Sorting fields within records: the sort-within-records verb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#the-sort-function-by-example" class="md-nav__link">
    The sort function by example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#simple-sorting-of-arrays" class="md-nav__link">
    Simple sorting of arrays
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#simple-sorting-of-maps-within-records" class="md-nav__link">
    Simple sorting of maps within records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#simple-sorting-of-maps-across-records" class="md-nav__link">
    Simple sorting of maps across records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-arrays-within-records" class="md-nav__link">
    Custom sorting of arrays within records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-arrays-across-records" class="md-nav__link">
    Custom sorting of arrays across records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-maps-within-records" class="md-nav__link">
    Custom sorting of maps within records
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#custom-sorting-of-maps-across-records" class="md-nav__link">
    Custom sorting of maps across records
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/johnkerl/miller/edit/main/docs/src/sorting.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<!---  PLEASE DO NOT EDIT DIRECTLY. EDIT THE .md.in FILE PLEASE. --->
<div>
<span class="quicklinks">
Quick links:
&nbsp;
<a class="quicklink" href="../reference-main-flag-list/index.html">Flags</a>
&nbsp;
<a class="quicklink" href="../reference-verbs/index.html">Verbs</a>
&nbsp;
<a class="quicklink" href="../reference-dsl-builtin-functions/index.html">Functions</a>
&nbsp;
<a class="quicklink" href="../glossary/index.html">Glossary</a>
&nbsp;
<a class="quicklink" href="../release-docs/index.html">Release docs</a>
</span>
</div>
<h1 id="sorting">Sorting<a class="headerlink" href="index.html#sorting" title="Permanent link">&para;</a></h1>
<p>Miller gives you three ways to sort your data:</p>
<ul>
<li>The <a href="../reference-verbs/index.html#sort"><code>sort</code></a> verb lets you sort records (rows) by various fields (columns).</li>
<li>The <a href="../reference-verbs/index.html#sort-within-records"><code>sort-within-records</code></a> verb lets you sort fields within records.</li>
<li>The <a href="../reference-dsl-builtin-functions/index.html#sort"><code>sort</code></a> DSL function gives you more customizable options for sorting data either within fields or across records. (See also the <a href="../reference-dsl-higher-order-functions/index.html">higher-order-functions page</a> for related information.)</li>
</ul>
<h2 id="sorting-records-the-sort-verb">Sorting records: the sort verb<a class="headerlink" href="index.html#sorting-records-the-sort-verb" title="Permanent link">&para;</a></h2>
<p>The <code>sort</code> verb (see <a href="../reference-verbs/index.html#sort">its documentation</a> for more information) reorders
entire records within the data stream. You can sort lexically (with or without case-folding),
numerically, or naturally (see
<a href="https://en.wikipedia.org/wiki/Natural_sort_order">https://en.wikipedia.org/wiki/Natural_sort_order</a>
or <a href="https://github.com/facette/natsort">https://github.com/facette/natsort</a> for more about natural
sorting); ascending or descending; and you can sort primarily by one column, then secondarily by
another, etc.</p>
<p>Input data:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --c2p cat example.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
color  shape    flag  k  index quantity rate
yellow triangle true  1  11    43.6498  9.8870
red    square   true  2  15    79.2778  0.0130
red    circle   true  3  16    13.8103  2.9010
red    square   false 4  48    77.5542  7.4670
purple triangle false 5  51    81.2290  8.5910
red    square   false 6  64    77.1991  9.5310
purple triangle false 7  65    80.1405  5.8240
yellow circle   true  8  73    63.9785  4.2370
yellow circle   true  9  87    63.5058  8.3350
purple square   false 10 91    72.3735  8.2430
</pre>

<p>Sorted numerically ascending by rate:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --c2p sort -n rate example.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
color  shape    flag  k  index quantity rate
red    square   true  2  15    79.2778  0.0130
red    circle   true  3  16    13.8103  2.9010
yellow circle   true  8  73    63.9785  4.2370
purple triangle false 7  65    80.1405  5.8240
red    square   false 4  48    77.5542  7.4670
purple square   false 10 91    72.3735  8.2430
yellow circle   true  9  87    63.5058  8.3350
purple triangle false 5  51    81.2290  8.5910
red    square   false 6  64    77.1991  9.5310
yellow triangle true  1  11    43.6498  9.8870
</pre>

<p>Sorted lexically ascending by color; then, within each color, numerically descending by quantity:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --c2p sort -f color -nr quantity example.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
color  shape    flag  k  index quantity rate
purple triangle false 5  51    81.2290  8.5910
purple triangle false 7  65    80.1405  5.8240
purple square   false 10 91    72.3735  8.2430
red    square   true  2  15    79.2778  0.0130
red    square   false 4  48    77.5542  7.4670
red    square   false 6  64    77.1991  9.5310
red    circle   true  3  16    13.8103  2.9010
yellow circle   true  8  73    63.9785  4.2370
yellow circle   true  9  87    63.5058  8.3350
yellow triangle true  1  11    43.6498  9.8870
</pre>

<p>Example of natural sort, adapted from <a href="https://github.com/facette/natsort">https://github.com/facette/natsort</a>:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --c2p cat data/natsort.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
n  name
1  Allegia 51 Clasteron
2  Callisto Morphamax 6000 SE
3  Xiph Xlater 58
4  1000X Radonius Maximus
5  20X Radonius Prime
6  30X Radonius
7  Alpha 2
8  Allegia 50 Clasteron
9  Alpha 2A-8000
10 200X Radonius
11 Allegia 50B Clasteron
12 Xiph Xlater 5
13 Callisto Morphamax 700
14 Xiph Xlater 500
15 Alpha 2A-900
16 20X Radonius
17 Callisto Morphamax 6000 SE2
18 Allegia 500 Clasteron
19 Alpha 100
20 Alpha 2A
21 Xiph Xlater 300
22 Callisto Morphamax
23 Callisto Morphamax 7000
24 10X Radonius
25 Xiph Xlater 40
26 Allegia 6R Clasteron
27 Callisto Morphamax 5000
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr --c2p sort -t name data/natsort.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
n  name
24 10X Radonius
16 20X Radonius
5  20X Radonius Prime
6  30X Radonius
10 200X Radonius
4  1000X Radonius Maximus
26 Allegia 6R Clasteron
8  Allegia 50 Clasteron
11 Allegia 50B Clasteron
1  Allegia 51 Clasteron
18 Allegia 500 Clasteron
7  Alpha 2
20 Alpha 2A
15 Alpha 2A-900
9  Alpha 2A-8000
19 Alpha 100
22 Callisto Morphamax
13 Callisto Morphamax 700
27 Callisto Morphamax 5000
2  Callisto Morphamax 6000 SE
17 Callisto Morphamax 6000 SE2
23 Callisto Morphamax 7000
12 Xiph Xlater 5
25 Xiph Xlater 40
3  Xiph Xlater 58
21 Xiph Xlater 300
14 Xiph Xlater 500
</pre>

<h2 id="sorting-fields-within-records-the-sort-within-records-verb">Sorting fields within records: the sort-within-records verb<a class="headerlink" href="index.html#sorting-fields-within-records-the-sort-within-records-verb" title="Permanent link">&para;</a></h2>
<p>The <code>sort-within-records</code> verb (see <a href="../reference-verbs/index.html#sort-within-records">its
documentation</a> for more information)
leaves records in their original order in the data stream, but reorders fields
within each record. A typical use-case is for given all records the same column-ordering,
in particular for converting JSON to CSV (or other tabular formats):</p>
<pre class="pre-highlight-in-pair">
<b>cat data/sort-within-records.json</b>
</pre>
<pre class="pre-non-highlight-in-pair">
{
  "a": 1,
  "b": 2,
  "c": 3
}
{
  "b": 4,
  "a": 5,
  "c": 6
}
{
  "c": 7,
  "b": 8,
  "a": 9
}
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr --ijson --opprint cat data/sort-within-records.json</b>
</pre>
<pre class="pre-non-highlight-in-pair">
a b c
1 2 3

b a c
4 5 6

c b a
7 8 9
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr --ijson --opprint sort-within-records data/sort-within-records.json</b>
</pre>
<pre class="pre-non-highlight-in-pair">
a b c
1 2 3
5 4 6
9 8 7
</pre>

<h2 id="the-sort-function-by-example">The sort function by example<a class="headerlink" href="index.html#the-sort-function-by-example" title="Permanent link">&para;</a></h2>
<ul>
<li>It returns a sorted copy of an input array or map.</li>
<li>Without second argument, uses Miller's default ordering which is numbers numerically, then strings lexically.</li>
<li>With second which is string, takes sorting flags from it: <code>"f"</code> for lexical or <code>"c"</code> for case-folded lexical, or <code>"t"</code> for natural sort order. An additional <code>"r"</code> in this string is for reverse/descending.</li>
</ul>
<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort array with default ordering</b>
<b>    print sort([5,2,3,1,4]);</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
[1, 2, 3, 4, 5]
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort array with reverse-default ordering</b>
<b>    print sort([5,2,3,1,4], "r");</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
[5, 4, 3, 2, 1]
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort array with custom function: another way to get default ordering</b>
<b>    print sort([5,2,3,1,4], func(a,b) { return a <=> b});</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
[1, 2, 3, 4, 5]
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort array with custom function: another way to get reverse-default ordering</b>
<b>    print sort([5,2,3,1,4], func(a,b) { return b <=> a});</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
[5, 4, 3, 2, 1]
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort map with default ordering on keys</b>
<b>    print sort({"c":2, "a": 3, "b": 1});</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
{
  "a": 3,
  "b": 1,
  "c": 2
}
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort map with reverse-default ordering on keys</b>
<b>    print sort({"c":2, "a": 3, "b": 1}, "r");</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
{
  "c": 2,
  "b": 1,
  "a": 3
}
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort map with custom function: default ordering on values</b>
<b>    print sort({"c":2, "a": 3, "b": 1}, "v");</b>
<b>    # Same:</b>
<b>    print sort({"c":2, "a": 3, "b": 1}, func(ak,av,bk,bv) {return av <=> bv});</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
{
  "b": 1,
  "c": 2,
  "a": 3
}
{
  "b": 1,
  "c": 2,
  "a": 3
}
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Sort map with custom function: reverse-default ordering on values</b>
<b>    print sort({"c":2, "a": 3, "b": 1}, "vr");</b>
<b>    # Same:</b>
<b>    print sort({"c":2, "a": 3, "b": 1}, func(ak,av,bk,bv){return bv <=> av});</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
{
  "a": 3,
  "c": 2,
  "b": 1
}
{
  "a": 3,
  "c": 2,
  "b": 1
}
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr -n put '</b>
<b>  end {</b>
<b>    # Natural sort</b>
<b>    print sort(["a1","a10","a100","a2","a20","a200"], "t");</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
["a1", "a2", "a10", "a20", "a100", "a200"]
</pre>

<p>In the rest of this page we'll look more closely at these variants.</p>
<h2 id="simple-sorting-of-arrays">Simple sorting of arrays<a class="headerlink" href="index.html#simple-sorting-of-arrays" title="Permanent link">&para;</a></h2>
<p>Using the <a href="../reference-dsl-builtin-functions/index.html#sort"><code>sort</code></a> function, you can
get a copy of an array, sorted by its values -- optionally, with reversed
order, and/or lexical/case-folded sorting. The first argument is an array to be
sorted. The optional second argument is a string containing any of the
characters <code>n</code> for numeric (the default anyway), <code>f</code> for lexical, or <code>c</code> for
case-folded lexical, and <code>r</code> for reverse.  Note that <code>sort</code> does not modify
its argument; it returns a sorted copy.</p>
<p>Also note that all the flags to <code>sort</code> allow you to operate on arrays which
contain strings, floats, and booleans; if you need to sort an array whose
values are themselves maps or arrays, you'll need <code>sort</code> with function argument
as described further down in this page.</p>
<pre class="pre-highlight-in-pair">
<b>cat data/sorta-example.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
key,values
alpha,4;6;1;5
beta,7;9;9;8
gamma,11;2;1;12
</pre>

<p>Default sort is numerical ascending:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --c2p --from data/sorta-example.csv put '</b>
<b>  $values = splita($values, ";");</b>
<b>  $values = sort($values);        # default flags</b>
<b>  $values = joinv($values, ";");</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
key   values
alpha 1;4;5;6
beta  7;8;9;9
gamma 1;2;11;12
</pre>

<p>Use the <code>"r"</code> flag for reverse, which is numerical descending:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --c2p --from data/sorta-example.csv put '</b>
<b>  $values = splita($values, ";");</b>
<b>  $values = sort($values, "r");   # 'r' flag for reverse sort</b>
<b>  $values = joinv($values, ";");</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
key   values
alpha 6;5;4;1
beta  9;9;8;7
gamma 12;11;2;1
</pre>

<p>Use the <code>"f"</code> flag for lexical ascending sort (and <code>"fr"</code> would lexical descending):</p>
<pre class="pre-highlight-in-pair">
<b>mlr --c2p --from data/sorta-example.csv put '</b>
<b>  $values = splita($values, ";");</b>
<b>  $values = sort($values, "f");   # 'f' flag for lexical sort</b>
<b>  $values = joinv($values, ";");</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
key   values
alpha 1;4;5;6
beta  7;8;9;9
gamma 1;11;12;2
</pre>

<p>Without and with case-folding:</p>
<pre class="pre-highlight-in-pair">
<b>cat data/sorta-example-text.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
key,values
alpha,cat;bat;Australia;Bavaria;apple;Colombia
alpha,cat;bat;Australia;Bavaria;apple;Colombia
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr --c2p --from data/sorta-example-text.csv put '</b>
<b>  $values = splita($values, ";");</b>
<b>  if (NR == 1) {</b>
<b>    $values = sort($values, "f"); # 'f' flag for (non-folded) lexical sort</b>
<b>  } else {</b>
<b>    $values = sort($values, "c"); # 'c' flag for case-folded lexical sort</b>
<b>  }</b>
<b>  $values = joinv($values, ";");</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
key   values
alpha Australia;Bavaria;Colombia;apple;bat;cat
alpha apple;Australia;bat;Bavaria;cat;Colombia
</pre>

<h2 id="simple-sorting-of-maps-within-records">Simple sorting of maps within records<a class="headerlink" href="index.html#simple-sorting-of-maps-within-records" title="Permanent link">&para;</a></h2>
<p>Using the <a href="../reference-dsl-builtin-functions/index.html#sort"><code>sort</code></a> function, you
can sort a map by its keys.</p>
<p>Since <code>sort</code> only gives you options for sorting a map by its keys, if you want
to sort a map by its values you'll need <code>sort</code> with function argument as
described further down in this page.</p>
<p>Also note that, unlike the <code>sort-within-record</code> verb with its <code>-r</code> flag,
<code>sort</code> doesn't recurse into submaps and sort those.</p>
<pre class="pre-highlight-in-pair">
<b>cat data/server-log.json</b>
</pre>
<pre class="pre-non-highlight-in-pair">
{
  "hostname": "localhost",
  "pid": 12345,
  "req": {
    "id": 6789,
    "method": "GET",
    "path": "api/check",
    "host": "foo.bar",
    "headers": {
      "host": "bar.baz",
      "user-agent": "browser"
    }
  },
  "res": {
    "status_code": 200,
    "header": {
      "content-type": "text",
      "content-encoding": "plain"
    }
  }
}
</pre>

<pre class="pre-highlight-in-pair">
<b>mlr --json --from data/server-log.json put '</b>
<b>  $req = sort($req);      # Ascending here</b>
<b>  $res = sort($res, "r"); # Descending here</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
[
{
  "hostname": "localhost",
  "pid": 12345,
  "req": {
    "headers": {
      "host": "bar.baz",
      "user-agent": "browser"
    },
    "host": "foo.bar",
    "id": 6789,
    "method": "GET",
    "path": "api/check"
  },
  "res": {
    "status_code": 200,
    "header": {
      "content-type": "text",
      "content-encoding": "plain"
    }
  }
}
]
</pre>

<h2 id="simple-sorting-of-maps-across-records">Simple sorting of maps across records<a class="headerlink" href="index.html#simple-sorting-of-maps-across-records" title="Permanent link">&para;</a></h2>
<p>As discussed in the page on
<a href="../operating-on-all-records/index.html">operating on all records</a>, while Miller is normally
<a href="../streaming-and-memory/index.html">streaming</a> (we operate on one record at a time), we
can accumulate records in an array-valued or map-valued
<a href="../reference-dsl-variables/index.html#out-of-stream-variables">out-of-stream variable</a>,
then operate on that record-list in an <code>end</code> block. This includes the possibility
of accumulating records in a map, then sorting the map.</p>
<p>Using the <code>f</code> flag we're sorting the map keys (1-up NR) lexically, so we
have 1, then 10, then 2:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --icsv --opprint --from example.csv put -q '</b>
<b>  begin {</b>
<b>    @records = {};  # Define as a map</b>
<b>  }</b>
<b>  $nr = NR;</b>
<b>  @records[NR] = $*; # Accumulate</b>
<b>  end {</b>
<b>    @records = sort(@records, "f");</b>
<b>    for (_, record in @records) {</b>
<b>      emit1 record;</b>
<b>    }</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
color  shape    flag  k  index quantity rate   nr
yellow triangle true  1  11    43.6498  9.8870 1
purple square   false 10 91    72.3735  8.2430 10
red    square   true  2  15    79.2778  0.0130 2
red    circle   true  3  16    13.8103  2.9010 3
red    square   false 4  48    77.5542  7.4670 4
purple triangle false 5  51    81.2290  8.5910 5
red    square   false 6  64    77.1991  9.5310 6
purple triangle false 7  65    80.1405  5.8240 7
yellow circle   true  8  73    63.9785  4.2370 8
yellow circle   true  9  87    63.5058  8.3350 9
</pre>

<h2 id="custom-sorting-of-arrays-within-records">Custom sorting of arrays within records<a class="headerlink" href="index.html#custom-sorting-of-arrays-within-records" title="Permanent link">&para;</a></h2>
<p>Using the <a href="../reference-dsl-builtin-functions/index.html#sort"><code>sort</code></a> function, you
can sort an array by its values, using another function (which you specify --
see the <a href="../reference-dsl-user-defined-functions/index.html">page on user-defined functions</a>)
for comparing elements.</p>
<ul>
<li>Your function must take two arguments, which will range over various pairs of values in your array;</li>
<li>It must return a number which is negative, zero, or positive depending on whether you want the first argument to sort less than, equal to, or greater than the second, respectively.</li>
</ul>
<p>For example, let's use the following input data. Instead of having an array, it
has some semicolon-delimited data in a field which we can split and sort:</p>
<pre class="pre-highlight-in-pair">
<b>cat data/sortaf-example.csv</b>
</pre>
<pre class="pre-non-highlight-in-pair">
key,values
alpha,5;2;8;6;1;4;9;10;3;7
</pre>

<p>In the following example we sort data in several ways -- the first two just
recapitulate (for reference) what <code>sort</code> with default flags already does; the third is novel:</p>
<pre class="pre-highlight-in-pair">
<b>mlr --icsv --ojson --from data/sortaf-example.csv put '</b>
<b></b>
<b>  # Same as sort($values)</b>
<b>  func forward(a,b) {</b>
<b>    return a <=> b</b>
<b>  }</b>
<b></b>
<b>  # Same as sort($values, "r")</b>
<b>  func reverse(a,b) {</b>
<b>    return b <=> a</b>
<b>  }</b>
<b></b>
<b>  # Custom sort</b>
<b>  func even_then_odd(a,b) {</b>
<b>    ax = a % 2;</b>
<b>    bx = b % 2;</b>
<b>    if (ax == bx) {</b>
<b>      return a <=> b</b>
<b>    } elif (bx == 1) {</b>
<b>      return -1</b>
<b>    } else {</b>
<b>      return 1</b>
<b>    }</b>
<b>  }</b>
<b></b>
<b>  split_values = splita($values, ";");</b>
<b>  $forward = sort(split_values, forward);</b>
<b>  $reverse = sort(split_values, reverse);</b>
<b>  $even_then_odd = sort(split_values, even_then_odd);</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
[
{
  "key": "alpha",
  "values": "5;2;8;6;1;4;9;10;3;7",
  "forward": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  "reverse": [10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
  "even_then_odd": [2, 4, 6, 8, 10, 1, 3, 5, 7, 9]
}
]
</pre>

<h2 id="custom-sorting-of-arrays-across-records">Custom sorting of arrays across records<a class="headerlink" href="index.html#custom-sorting-of-arrays-across-records" title="Permanent link">&para;</a></h2>
<p>As noted above, we can use the
<a href="../operating-on-all-records/index.html">operating-on-all-records</a> paradigm
to accumulate records in an array-valued or map-valued
<a href="../reference-dsl-variables/index.html#out-of-stream-variables">out-of-stream variable</a>,
then operate on that record-list in an <code>end</code> block. This includes the possibility
of accumulating records in an array, then sorting the array.</p>
<p>Note that here the array elements are maps, so the <code>a</code> and <code>b</code> arguments to our
functions are maps -- and we have to access the <code>index</code> field using either
<code>a["index"]</code> and <code>b["index"]</code>, or (using the <a href="../reference-dsl-operators/index.html#the-double-purpose-dot-operator">dot operator for
indexing</a>)
<code>a.index</code> and <code>b.index</code>.</p>
<pre class="pre-highlight-in-pair">
<b>mlr --icsv --opprint --from example.csv put -q '</b>
<b>  # Sort primarily ascending on the shape field, then secondarily</b>
<b>  # descending numeric on the index field.</b>
<b>  func cmp(a, b) {</b>
<b>    cmp1 = a.shape <=> b.shape;</b>
<b>    if (cmp1 != 0) {</b>
<b>      return cmp1</b>
<b>    } else {</b>
<b>      return b.index <=> a.index;</b>
<b>    }</b>
<b>  }</b>
<b>  begin {</b>
<b>    @records = [];  # Define as an array, else auto-create will make a map</b>
<b>  }</b>
<b>  @records[NR] = $*; # Accumulate</b>
<b>  end {</b>
<b>    @records = sort(@records, cmp);</b>
<b>    for (record in @records) {</b>
<b>      emit1 record;</b>
<b>    }</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
color  shape    flag  k  index quantity rate
yellow circle   true  9  87    63.5058  8.3350
yellow circle   true  8  73    63.9785  4.2370
red    circle   true  3  16    13.8103  2.9010
purple square   false 10 91    72.3735  8.2430
red    square   false 6  64    77.1991  9.5310
red    square   false 4  48    77.5542  7.4670
red    square   true  2  15    79.2778  0.0130
purple triangle false 7  65    80.1405  5.8240
purple triangle false 5  51    81.2290  8.5910
yellow triangle true  1  11    43.6498  9.8870
</pre>

<h2 id="custom-sorting-of-maps-within-records">Custom sorting of maps within records<a class="headerlink" href="index.html#custom-sorting-of-maps-within-records" title="Permanent link">&para;</a></h2>
<p>Using the <a href="../reference-dsl-builtin-functions/index.html#sort"><code>sort</code></a> function, you
can sort a map using a function which you specify (see the <a href="../reference-dsl-user-defined-functions/index.html">page on
user-defined functions</a>) for comparing
keys and/or values.</p>
<ul>
<li>Your function must take four arguments, which will range over various pairs of key-value pairs in your map;</li>
<li>It must return a number which is negative, zero, or positive depending on whether you want the first argument to sort less than, equal to, or greater than the second, respectively.</li>
</ul>
<p>For example, we can sort ascending or descending by map key or map value:</p>
<pre class="pre-highlight-in-pair">
<b>mlr -n put -q '</b>
<b>  func f1(ak, av, bk, bv) {</b>
<b>    return ak <=> bk</b>
<b>  }</b>
<b>  func f2(ak, av, bk, bv) {</b>
<b>    return bk <=> ak</b>
<b>  }</b>
<b>  func f3(ak, av, bk, bv) {</b>
<b>    return av <=> bv</b>
<b>  }</b>
<b>  func f4(ak, av, bk, bv) {</b>
<b>    return bv <=> av</b>
<b>  }</b>
<b>  end {</b>
<b>    x = {</b>
<b>      "c":1,</b>
<b>      "a":3,</b>
<b>      "b":2,</b>
<b>    };</b>
<b></b>
<b>    print sort(x, f1);</b>
<b>    print sort(x, f2);</b>
<b>    print sort(x, f3);</b>
<b>    print sort(x, f4);</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
{
  "a": 3,
  "b": 2,
  "c": 1
}
{
  "c": 1,
  "b": 2,
  "a": 3
}
{
  "c": 1,
  "b": 2,
  "a": 3
}
{
  "a": 3,
  "b": 2,
  "c": 1
}
</pre>

<h2 id="custom-sorting-of-maps-across-records">Custom sorting of maps across records<a class="headerlink" href="index.html#custom-sorting-of-maps-across-records" title="Permanent link">&para;</a></h2>
<p>We can modify our above example just a bit, where we accumulate records in a map rather than
an array. Here the map keys will be <code>NR</code> values <code>"1"</code>, <code>"2"</code>, etc.</p>
<p>Why would we do this? When we're operating across all records and keeping all
of them -- densely -- accumulating them in an array is fine. If we're only
taking a subset -- sparsely -- and we want to retain the original <code>NR</code> as keys,
using a map is handy, since we don't need contiguous keys.</p>
<pre class="pre-highlight-in-pair">
<b>mlr --icsv --opprint --from example.csv put -q '</b>
<b>  # Sort descending numeric on the index field</b>
<b>  func cmp(ak, av, bk, bv) {</b>
<b>    return bv.index <=> av.index</b>
<b>  }</b>
<b>  begin {</b>
<b>    @records = {};  # Define as a map</b>
<b>  }</b>
<b>  @records[NR] = $*; # Accumulate</b>
<b>  end {</b>
<b>    @records = sort(@records, cmp);</b>
<b>    for (_, record in @records) {</b>
<b>      emit1 record;</b>
<b>    }</b>
<b>  }</b>
<b>'</b>
</pre>
<pre class="pre-non-highlight-in-pair">
color  shape    flag  k  index quantity rate
purple square   false 10 91    72.3735  8.2430
yellow circle   true  9  87    63.5058  8.3350
yellow circle   true  8  73    63.9785  4.2370
purple triangle false 7  65    80.1405  5.8240
red    square   false 6  64    77.1991  9.5310
purple triangle false 5  51    81.2290  8.5910
red    square   false 4  48    77.5542  7.4670
red    circle   true  3  16    13.8103  2.9010
red    square   true  2  15    79.2778  0.0130
yellow triangle true  1  11    43.6498  9.8870
</pre>

              
            </article>
            
          </div>
        </div>
        
          <a href="index.html#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../flatten-unflatten/index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Flatten/unflatten: converting between JSON and tabular formats" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Flatten/unflatten: converting between JSON and tabular formats
            </div>
          </div>
        </a>
      
      
        
        <a href="../streaming-and-memory/index.html" class="md-footer__link md-footer__link--next" aria-label="Next: Streaming processing, and memory usage" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Streaming processing, and memory usage
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="../../../../squidfunk.github.io/mkdocs-material/index.html" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
        <script src="../../../../cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js"></script>
      
        <script src="../javascripts/tables.js"></script>
      
        <script src="../readthedocs-data.js"></script>
      
        <script src="../../../_/static/core/js/readthedocs-doc-embed.js"></script>
      
        <script src="../../../_/static/javascript/readthedocs-analytics.js"></script>
      
    
  </body>
</html>