<!DOCTYPE html>

<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>数字 / Learn Vimscript the Hard Way</title>
        <meta name="description" content="">
        <meta name="author" content="Steve Losh">
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

        <link href="../static/styles/skeleton/base.css" rel="stylesheet" type="text/css" />
        <link href="../static/styles/skeleton/skeleton.css" rel="stylesheet" type="text/css" />
        <link href="../static/styles/skeleton/layout.css" rel="stylesheet" type="text/css" />

        <link href="../static/styles/tango.css" rel="stylesheet" type="text/css" />
        <link href="../static/styles/style.less" rel="stylesheet/less" type="text/css" />

        <script type="text/javascript" src="../static/scripts/less.js"></script>
    </head>

    <body class="">
        <div class="container">
            <header class="sixteen columns">
                <h1><a href="../index.html"></a></h1>
            </header>

            

    <section class="content twelve columns offset-by-one">
        <div> 
<h1 id="_1">数字</h1>
<p>现在是时候开始深入讨论你能用到的变量类型。首先从数值类型开始吧。</p>
<p>Vimscript有两种数值类型：Number和Float。一个Number是32位带符号整数。一个Float是浮点数。</p>
<h2 id="number">数字(Number)形式</h2>
<p>你可以通过一些不同的方式设置Number的格式。执行下面的命令：</p>
<pre class="codehilite"><code class="language-vim">:echom 100</code></pre>


<p>没什么好惊讶的 -- Vim显示<code>100</code>。现在执行下面的命令：</p>
<pre class="codehilite"><code class="language-vim">:echom 0xff</code></pre>


<p>这次Vim显示<code>255</code>。你可以加<code>0x</code>或<code>0X</code>前缀来指定16进制的数字。现在执行下面的命令：</p>
<pre class="codehilite"><code class="language-vim">:echom 010</code></pre>


<p>你也可以加<code>0</code>前缀来使用八进制。不过由于容易混淆，用的时候要保持头脑清醒。尝试执行下面的命令：</p>
<pre class="codehilite"><code class="language-vim">:echom 017
:echom 019</code></pre>


<p>第一个命令中，Vim将打印出<code>15</code>，因为<code>17</code>在八进制中等于十进制的<code>15</code>。
在第二个命令中，Vim把数字的进制当作十进制，即使它以<code>0</code>开头，因为它不可能是一个八进制数字。</p>
<p>因为Vim会一声不吭地处理掉这样的错误，我建议尽量避免使用八进制数字。</p>
<h2 id="float">浮点数(Float)格式</h2>
<p>Float也可以用许多方式进行定制。执行下面的命令：</p>
<pre class="codehilite"><code class="language-vim">:echo 100.1</code></pre>


<p>注意这里我们使用了<code>echo</code>而不是更常用的<code>echom</code>。待会我会解释为什么这样做(译注：当然你现在可以试试看)。</p>
<p>Vim如愿输出了<code>100.1</code>。你也可以指定指数形式。执行下面命令：</p>
<pre class="codehilite"><code class="language-vim">:echo 5.45e+3</code></pre>


<p>Vim输出<code>5450.0</code>。也可以用负的指数。执行下面命令：</p>
<pre class="codehilite"><code class="language-vim">:echo 15.45e-2</code></pre>


<p>Vim输出<code>0.1545</code>。在10的幂前面的<code>+</code>或<code>-</code>是可选的。如果没有，就默认为正数。执行下面的命令：</p>
<pre class="codehilite"><code class="language-vim">:echo 15.3e9</code></pre>


<p>Vim将输出等价的<code>1.53e10</code>。小数点和小数点后面的数字是<em>必须要有</em>的。执行下面命令并看它为何出错：</p>
<pre class="codehilite"><code class="language-vim">:echo 5e10</code></pre>


<h2 id="_2">强制转换</h2>
<p>当你在运算，比较或其他操作中混合使用Number和Float类型，Vim将把Number转换成Float，
以Float格式作为结果。执行下面命令：</p>
<pre class="codehilite"><code class="language-vim">:echo 2 * 2.0</code></pre>


<p>Vim输出<code>4.0</code>。</p>
<h2 id="_3">除法</h2>
<p>在两个Number之间的除法中，余数会被丢弃。执行下面命令：</p>
<pre class="codehilite"><code class="language-vim">:echo 3 / 2</code></pre>


<p>Vim输出<code>1</code>。如果你希望Vim使用浮点数除法，至少有一个数字必须是Float，
这样剩下的数字也会被转换成浮点数。执行下面命令：</p>
<pre class="codehilite"><code class="language-vim">:echo 3 / 2.0</code></pre>


<p>Vim输出<code>1.5</code>。<code>3</code>被强制转换成一个浮点数，然后运行了普通的浮点数除法。</p>
<h2 id="_4">练习</h2>
<p>阅读<code>:help Float</code>。什么情况下在Vimscript中不能用浮点数？</p>
<p>阅读<code>:help floating-point-precision</code>。这意味着你在写一个处理浮点数的Vim插件时需要注意什么？</p></div>

        <div class="prevnext">
            
                <a class="prev" href="24.html">&laquo; Previous</a>
            
            
                <a class="next" href="26.html">Next &raquo;</a>
            
        </div>
    </section>


            <footer class="sixteen columns">
                Made by <a href="25.html"></a>.

                <a href="../license.html">License</a>.

                Built with
                <a href="http://bitbucket.org/sjl/bookmarkdown/">Bookmarkdown</a>.
            </footer>
        </div>

        

        
    </body>
</html>